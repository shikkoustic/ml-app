<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Using Objects</title>

    <style>
      body {
        margin: 0;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;   
        align-items: center;     
        background-color: black;
        color: white;
        font-family: Arial, sans-serif;
      }
      .moves{
        display: flex;
        justify-content: center;
        gap: 20px;
        align-items: center;
        margin: 20px 0;
      }
      .title{
        font-size: 35px;
        font-weight: 600;
      }
      .move-icon{
        height: 55px;
      }
      .move-button{
        background-color: transparent;
        border: 3px solid red;
        width: 110px;
        height: 110px;
        border-radius: 50%;
        margin-right: 5px;
      }

      .back-btn {
        position: absolute;
        top: 20px;
        left: 20px;

        padding: 10px 16px;
        background-color: white;
        color: black;
        text-decoration: none;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 500;

        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        transition: all 0.2s ease;
      }

.back-btn:hover {
  background-color: #e5e5e5;
  transform: translateY(-2px);
}

    </style>

  </head>
  <body>
    
     <a href="/dashboard" class="back-btn">Back to Dashboard</a>

    <p class="title">Rock Paper Scissors Game</p>

    <div class="moves">
      <button onclick="playGame('Rock');" class="move-button">
        <img src="{{ url_for('static', filename='images/rock-emoji.png') }}" class="move-icon">
      </button>

      <button onclick="playGame('Paper');" class="move-button">
        <img src="{{ url_for('static', filename='images/paper-emoji.png') }}" class="move-icon">
      </button>

      <button onclick="playGame('Scissors');" class="move-button">
        <img src="{{ url_for('static', filename='images/scissors-emoji.png') }}" class="move-icon">
      </button>
    </div>

    <p class="js-result"></p>
    <p class="move"></p>
    <p class="js-score"></p>

    <button onclick="
      score.wins = 0; score.losses = 0; score.ties = 0;
      localStorage.removeItem('Score'); 
      updateScore();
    ">
      Reset Score
    </button>

    <script> 
      let score = JSON.parse(localStorage.getItem('Score')) || {
        wins: 0,
        losses: 0,
        ties: 0
      };

      updateScore();

      function updateScore() {
        document.querySelector('.js-score').innerHTML =
          `Wins: ${score.wins}, Losses: ${score.losses}, Ties: ${score.ties}`;
      }

      function pickCompMove() {
        const randNo = Math.random();

        if (randNo <= 1/3) return 'Rock';
        else if (randNo <= 2/3) return 'Paper';
        else return 'Scissors';
      }

      function playGame(playerMove) {
        const compMove = pickCompMove();
        let result = '';

        if (playerMove === 'Scissors') {
          if (compMove === 'Rock') result = 'You Lose.';
          else if (compMove === 'Paper') result = 'You Win.';
          else result = 'Tie.';
        } 
        else if (playerMove === 'Paper') {
          if (compMove === 'Rock') result = 'You Win.';
          else if (compMove === 'Paper') result = 'Tie.';
          else result = 'You Lose.';
        } 
        else {
          if (compMove === 'Rock') result = 'Tie.';
          else if (compMove === 'Paper') result = 'You Lose.';
          else result = 'You Win.';
        }

        if (result === 'You Win.') score.wins++;
        else if (result === 'You Lose.') score.losses++;
        else score.ties++;

        localStorage.setItem('Score', JSON.stringify(score));
        updateScore();

        document.querySelector('.js-result').innerHTML =
          `You picked <b>${playerMove}</b>. Computer picked <b>${compMove}</b>. <br>${result}`;
      }
    </script>
  </body>
</html>


